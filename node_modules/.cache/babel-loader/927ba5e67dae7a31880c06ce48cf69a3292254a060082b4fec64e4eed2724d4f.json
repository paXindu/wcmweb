{"ast":null,"code":"import _regeneratorRuntime from\"F:/projects/WMS/full app/wcmweb/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"F:/projects/WMS/full app/wcmweb/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"F:/projects/WMS/full app/wcmweb/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/projects/WMS/full app/wcmweb/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{collection,getDocs,updateDoc,doc}from\"firebase/firestore\";import{firestore}from\"../firebase\";import{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Mapdata(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),locations=_useState2[0],setLocations=_useState2[1];var fetchLocations=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var querySnapshot,locationsData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getDocs(collection(firestore,\"locations\"));case 2:querySnapshot=_context.sent;locationsData=querySnapshot.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});});setLocations(locationsData);console.log(locationsData);case 6:case\"end\":return _context.stop();}},_callee);}));return function fetchLocations(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchLocations();},[]);var handleClick=function handleClick(location){window.open(location.lola,\"_blank\");};var handleFullButtonClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event,locationId){var locationRef,updatedLocations;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:event.stopPropagation();locationRef=doc(firestore,\"locations\",locationId);_context2.next=4;return updateDoc(locationRef,{condition:\"full\"});case 4:updatedLocations=locations.map(function(location){if(location.id===locationId){return _objectSpread(_objectSpread({},location),{},{condition:\"full\"});}return location;});setLocations(updatedLocations);case 6:case\"end\":return _context2.stop();}},_callee2);}));return function handleFullButtonClick(_x,_x2){return _ref2.apply(this,arguments);};}();var handleCollectedButtonClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(event,locationId){var locationRef,updatedLocations;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:event.stopPropagation();locationRef=doc(firestore,\"locations\",locationId);_context3.next=4;return updateDoc(locationRef,{condition:\"normal\"});case 4:updatedLocations=locations.map(function(location){if(location.id===locationId){return _objectSpread(_objectSpread({},location),{},{condition:\"normal\"});}return location;});setLocations(updatedLocations);case 6:case\"end\":return _context3.stop();}},_callee3);}));return function handleCollectedButtonClick(_x3,_x4){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-4\",children:\"Locations:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"relative\",children:locations.map(function(location){return/*#__PURE__*/_jsxs(\"li\",{onClick:function onClick(){return handleClick(location);},className:\"py-2 px-4 rounded-lg shadow-md border border-gray-300 hover:bg-gray-100 cursor-pointer relative\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:location.name}),\" \",location.condition,location.condition===\"normal\"&&/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(event){return handleFullButtonClick(event,location.id);},className:\"py-1 px-2 bg-green-500 hover:bg-green-600 text-white rounded-lg shadow-md absolute right-4 top-1/2 transform -translate-y-1/2\",children:\"Full\"}),location.condition===\"full\"&&/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(event){return handleCollectedButtonClick(event,location.id);},className:\"py-1 px-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg shadow-md absolute right-4 top-1/2 transform -translate-y-1/2\",children:\"Collected\"})]},location.id);})})]});}","map":{"version":3,"names":["collection","getDocs","updateDoc","doc","firestore","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Mapdata","_useState","_useState2","_slicedToArray","locations","setLocations","fetchLocations","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","querySnapshot","locationsData","wrap","_callee$","_context","prev","next","sent","docs","map","_objectSpread","data","id","console","log","stop","apply","arguments","handleClick","location","window","open","lola","handleFullButtonClick","_ref2","_callee2","event","locationId","locationRef","updatedLocations","_callee2$","_context2","stopPropagation","condition","_x","_x2","handleCollectedButtonClick","_ref3","_callee3","_callee3$","_context3","_x3","_x4","className","children","onClick","name"],"sources":["F:/projects/WMS/full app/wcmweb/src/pages/readdata.js"],"sourcesContent":["import { collection, getDocs, updateDoc, doc } from \"firebase/firestore\";\r\nimport { firestore } from \"../firebase\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport default function Mapdata() {\r\n  const [locations, setLocations] = useState([]);\r\n\r\n  const fetchLocations = async () => {\r\n    const querySnapshot = await getDocs(collection(firestore, \"locations\"));\r\n    const locationsData = querySnapshot.docs.map((doc) => ({\r\n      ...doc.data(),\r\n      id: doc.id,\r\n    }));\r\n    setLocations(locationsData);\r\n    console.log(locationsData);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchLocations();\r\n  }, []);\r\n\r\n  const handleClick = (location) => {\r\n    window.open(location.lola, \"_blank\");\r\n  };\r\n\r\n  const handleFullButtonClick = async (event, locationId) => {\r\n    event.stopPropagation();\r\n    const locationRef = doc(firestore, \"locations\", locationId);\r\n    await updateDoc(locationRef, {\r\n      condition: \"full\",\r\n    });\r\n    const updatedLocations = locations.map((location) => {\r\n      if (location.id === locationId) {\r\n        return { ...location, condition: \"full\" };\r\n      }\r\n      return location;\r\n    });\r\n    setLocations(updatedLocations);\r\n  };\r\n\r\n  const handleCollectedButtonClick = async (event, locationId) => {\r\n    event.stopPropagation();\r\n    const locationRef = doc(firestore, \"locations\", locationId);\r\n    await updateDoc(locationRef, {\r\n      condition: \"normal\",\r\n    });\r\n    const updatedLocations = locations.map((location) => {\r\n      if (location.id === locationId) {\r\n        return { ...location, condition: \"normal\" };\r\n      }\r\n      return location;\r\n    });\r\n    setLocations(updatedLocations);\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-3xl mx-auto\">\r\n      <h1 className=\"text-3xl font-bold mb-4\">Locations:</h1>\r\n      <ul className=\"relative\">\r\n        {locations.map((location) => (\r\n          <li\r\n            key={location.id}\r\n            onClick={() => handleClick(location)}\r\n            className=\"py-2 px-4 rounded-lg shadow-md border border-gray-300 hover:bg-gray-100 cursor-pointer relative\"\r\n          >\r\n            <span className=\"font-bold\">{location.name}</span>{\" \"}\r\n            {location.condition}\r\n            {location.condition === \"normal\" && (\r\n              <button\r\n                onClick={(event) => handleFullButtonClick(event, location.id)}\r\n                className=\"py-1 px-2 bg-green-500 hover:bg-green-600 text-white rounded-lg shadow-md absolute right-4 top-1/2 transform -translate-y-1/2\"\r\n              >\r\n                Full\r\n              </button>\r\n            )}\r\n            {location.condition === \"full\" && (\r\n              <button\r\n                onClick={(event) =>\r\n                  handleCollectedButtonClick(event, location.id)\r\n                }\r\n                className=\"py-1 px-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg shadow-md absolute right-4 top-1/2 transform -translate-y-1/2\"\r\n              >\r\n                Collected\r\n              </button>\r\n            )}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}